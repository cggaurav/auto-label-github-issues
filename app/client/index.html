<!DOCTYPE html>
<html>
<head>
	<title>Auto label Github issues</title>
	<link rel="stylesheet" href="./index.css">
	<link rel="shortcut icon" type="image/ico" href="./favicon.ico"/>
</head>
<body>
	<h1> Auto Label Github Issues </h1>

	<form id="issue_form" class="form" accept-charset="UTF-8" method="post">
	    <input id="issue_input" autofocus="autofocus" autocomplete="off" aria-label="Issue title" type="text" value="" name="issue" id="issue_title">
	</form>
	<div class="labels">
		<a class="label bug" id="bug" title="bug">bug</a>
		<a class="label doc" id="doc" title="doc">doc</a>
		<a class="label enhancement" id="enhancement" title="enhancement">enhancement</a>
		<a class="label feature" id="feature" title="feature">feature</a>
		<a class="label help-wanted" id="help" title="help wanted">help wanted</a>
		<a class="label question" id="question" title="question">question</a>
	</div>
	<div class="score">
		<p id="score"></p>
	</div>
	<div class="note">
		If this is not working, switch on the Floydhub server to start serving the models by clicking Run <a href="https://www.floydhub.com/cggaurav/projects/auto-label-github-issues/serving"> Here </a>
	</div>

	<a href="https://github.com/cggaurav/auto-label-github-issues"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_left_darkblue_121621.png" alt="Fork me on GitHub"></a>
	<!-- Make things simpler with JQuery -->
	<script
		src="https://code.jquery.com/jquery-3.3.1.min.js"
		integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
		crossorigin="anonymous">
	</script>
</body>
	<script>
		const URL = 'https://www.floydlabs.com/serve/uZYC3CjBH8YBESLLH9zLkT?issue='
		$(function() {
			$('#issue_form').keypress((e) => {
				if (e.which == 13) {
					e.preventDefault()

					let issue = $('#issue_input').val()

					console.log(`ISSUE: ${issue}`)

			  		// OK Lets go to to the model
			  		$.getJSON([URL, issue].join(''), (detect) => {
			  			console.log(`ISSUE RESULT: ${JSON.stringify(detect)}`)
			  			$(`.label`).css('visibility', 'hidden')
			  			$(`#${detect.label}`).css('visibility', 'visible')
			  		 	$('#score').text(`Score: ${detect.score}`)
			  		},"json")
			  	}
			})
		})
	</script>
</html>
